(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{21:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(15),o=t.n(c),r=t(6),a=t(3),u=t(1),i=t(0),l=function(e){var n=e.addName,t=e.newName,c=e.handleNameChange,o=e.handleNumberChange,r=e.number;return Object(i.jsx)("form",{onSubmit:n,children:Object(i.jsxs)("div",{children:["name: ",Object(i.jsx)("input",{value:t,onChange:c}),"number: ",Object(i.jsx)("input",{value:r,onChange:o}),Object(i.jsx)("button",{type:"submit",children:"add"})]})})},s=function(e){var n=e.id,t=e.name,c=e.number,o=e.deletePerson;return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("li",{children:[t," ",c," ",Object(i.jsx)("button",{onClick:o,children:"Delete"})]},n)})},d=function(e){var n=e.persons,t=e.filtered,c=e.handleDeletePerson,o=(e.props,n.filter((function(e){return e.name.toUpperCase().includes(t.toUpperCase())})));return Object(i.jsx)("ul",{children:o.map((function(e){return Object(i.jsx)(s,{id:e.id,name:e.name,number:e.number,deletePerson:c(e.name,e.id)})}))})},h=function(e){var n=e.filtered,t=e.handleFilter;return Object(i.jsxs)("div",{children:["filter shown with ",Object(i.jsx)("input",{value:n,onChange:t})]})},b=function(e){var n=e.message;return null===n?null:Object(i.jsx)("div",{className:"error",children:n})},j=(t(21),t(4)),f=t.n(j),m="/api/persons",p=function(){try{return f.a.get(m).then((function(e){return e.data}))}catch(e){console.log(e)}},O=function(e){try{return f.a.post(m,e).then((function(e){return e.data}))}catch(n){console.log(n)}},g=function(e){try{var n=f.a.delete("".concat(m,"/").concat(e));return console.log(n),n.then((function(e){return e.data}))}catch(t){console.log(t)}},x=function(e,n){try{return f.a.put("".concat(m,"/").concat(e),n).then((function(e){return e.data}))}catch(t){console.log(t)}},v=function(){var e=Object(u.useState)([]),n=Object(a.a)(e,2),t=n[0],c=n[1],o=Object(u.useState)(""),s=Object(a.a)(o,2),j=s[0],f=s[1],m=Object(u.useState)(""),v=Object(a.a)(m,2),w=v[0],C=v[1],N=Object(u.useState)(""),y=Object(a.a)(N,2),k=y[0],D=y[1],S=Object(u.useState)(null),P=Object(a.a)(S,2),T=P[0],F=P[1];return Object(u.useEffect)((function(){p().then((function(e){c(e)}))}),[]),Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Phonebook"}),Object(i.jsx)(b,{message:T}),Object(i.jsx)(h,{filtered:k,handleFilter:function(e){D(e.target.value),console.log(k)}}),Object(i.jsx)("h2",{children:"Add a new person!"}),Object(i.jsx)(l,{newName:j,addName:function(e){e.preventDefault(),f(e.target.value);var n={name:j,number:w,id:t.length+1},o=t.find((function(e){return e.name===j}));o?(console.log(o),window.confirm("".concat(j," is already in the phonebook. Replace the old number with a new one?"))&&(x(o.id,Object(r.a)(Object(r.a)({},o),{},{number:w})).then((function(e){console.log("updated person props",e),c(t.map((function(n){return n.name?e:n}))),console.group(t)})).catch((function(e){console.log(e),F("This is an error")})),c(t.concat(n)),console.log(n,t),F("Changed ".concat(n," number")),f(""),C(""),setTimeout((function(){F(null)}),3e3))):(O(n).then((function(e){c(t.concat(n)),F("Added ".concat(n.name)),f(""),C("")})).catch((function(e){F("".concat(e.response.data.error)),console.log(e)})),setTimeout((function(){F(null)}),3e3))},handleNameChange:function(e){f(e.target.value)},handleNumberChange:function(e){C(e.target.value)},number:w}),Object(i.jsx)("h2",{children:"Numbers"}),Object(i.jsx)(d,{persons:t,filtered:k,handleDeletePerson:function(e,n){return function(){window.confirm("Delete ".concat(e,"?"))&&(g(n).then((function(){c(t.filter((function(e){return e.id!==n}))),F("Deleted ".concat(e)),f(""),C("")})).catch((function(n){c(t.filter((function(n){return n.name!==e}))),F("User ".concat(e," has already been deleted"))})),setTimeout((function(){F(null)}),3e3))}}})]})};o.a.render(Object(i.jsx)(v,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.ae2281d1.chunk.js.map