{"version":3,"sources":["components/AddPerson.js","components/Persons/Person/Person.js","components/Persons/Persons.js","components/Filter.js","components/Notifcation.js","services/persons.js","App.js","index.js"],"names":["AddPerson","addName","newName","handleNameChange","handleNumberChange","number","onSubmit","value","onChange","type","Person","id","name","deletePerson","onClick","Persons","persons","filtered","handleDeletePerson","filteredResult","props","filter","person","toUpperCase","includes","map","Filter","handleFilter","Notification","message","className","url","axios","get","then","res","data","err","console","log","nameObject","post","request","delete","put","App","useState","setPersons","setNewName","setNumber","setFiltered","errorMessage","setErrorMessage","useEffect","personsService","names","e","target","preventDefault","length","foundPerson","find","n","window","confirm","updatedPerson","group","catch","concat","setTimeout","newPerson","error","response","reactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.ae2281d1.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst AddPerson = ({addName, newName, handleNameChange, handleNumberChange, number}) => {\r\n    return (\r\n        <form onSubmit={addName}>\r\n        <div>\r\n          name: <input value={newName} onChange={handleNameChange} />\r\n          number: <input value={number} onChange={handleNumberChange} />\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n    )\r\n}\r\n\r\nexport default AddPerson\r\n","import React from 'react'\r\n\r\n\r\nconst Person = ({id, name, number, deletePerson}) => {\r\n    return (\r\n        <>\r\n        <li key={id}>{name} {number} <button onClick={deletePerson}>Delete</button></li> \r\n        </>\r\n    )\r\n}\r\n\r\nexport default Person\r\n","import React from 'react'\r\nimport Person from './Person/Person'\r\n\r\nconst Persons = ({persons, filtered, handleDeletePerson, props }) => {\r\n\r\n    \r\n  \r\n    let filteredResult = persons.filter((person) =>\r\n    person.name.toUpperCase().includes(filtered.toUpperCase())\r\n\r\n  );\r\n    return (\r\n       <ul>\r\n        {filteredResult.map(person => (\r\n          <Person id={person.id} name={person.name} number={person.number} deletePerson={handleDeletePerson(person.name, person.id)} />\r\n        ))}\r\n        </ul>\r\n    )\r\n  //   return(\r\n  //     <div>hello</div>\r\n  //   )\r\n}\r\n\r\nexport default Persons\r\n","import React from 'react'\r\n\r\nconst Filter = ({filtered, handleFilter}) => {\r\n    return (\r\n        <div>\r\n            filter shown with <input value={filtered} onChange={handleFilter} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Filter\r\n","import React from 'react'\r\nconst Notification = ({ message }) => {\r\n    if (message === null) {\r\n      return null\r\n    }\r\n  \r\n    return (\r\n      <div className=\"error\">\r\n        {message}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  export default Notification;","import axios from 'axios';\r\n\r\nconst url = '/api/persons';\r\n\r\nconst getAll = () => {\r\n  try {\r\n    const request = axios.get(url);\r\n    return request.then((res) => res.data);\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n};\r\n\r\nconst create = (nameObject) => {\r\n  try {\r\n    const request = axios.post(url, nameObject);\r\n    return request.then((res) => res.data);\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n};\r\n\r\nconst updatePerson = (id, nameObject) => {\r\n  try {\r\n    const request = axios.put(`${url}/${id}`, nameObject);\r\n    return request.then((res) => res.data);\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n};\r\n\r\nconst deletePerson = (id) => {\r\n  try {\r\n    const request = axios.delete(`${url}/${id}`);\r\n    console.log(request);\r\n    return request.then((res) => res.data);\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n};\r\n\r\n// eslint-disable-next-line import/no-anonymous-default-export\r\nexport default {\r\n  getAll: getAll,\r\n  create: create,\r\n  deletePerson: deletePerson,\r\n  updatePerson: updatePerson,\r\n};\r\n","import React, { useState, useEffect } from 'react';\r\nimport AddPerson from './components/AddPerson';\r\nimport Persons from './components/Persons/Persons';\r\nimport Filter from './components/Filter';\r\nimport Notification from './components/Notifcation';\r\nimport './app.css'\r\n\r\nimport personsService from './services/persons';\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([]);\r\n  const [newName, setNewName] = useState('');\r\n  const [number, setNumber] = useState('');\r\n  const [filtered, setFiltered] = useState('');\r\n  const [errorMessage, setErrorMessage] = useState(null);\r\n\r\n  const handleNameChange = (e) => {\r\n    setNewName(e.target.value);\r\n  };\r\n\r\n  const handleNumberChange = (e) => {\r\n    setNumber(e.target.value);\r\n  };\r\n  const handleFilter = (e) => {\r\n    setFiltered(e.target.value);\r\n    console.log(filtered);\r\n  };\r\n\r\n  const addName = (e) => {\r\n    e.preventDefault();\r\n    setNewName(e.target.value);\r\n\r\n    const nameObject = {\r\n      name: newName,\r\n      number: number,\r\n      id: persons.length + 1,\r\n    };\r\n    let foundPerson = persons.find((n) => n.name === newName);\r\n   \r\n\r\n    if (foundPerson) {\r\n      console.log(foundPerson);\r\n      if (\r\n        window.confirm(\r\n          `${newName} is already in the phonebook. Replace the old number with a new one?`\r\n        )\r\n      ) {\r\n        personsService\r\n          .updatePerson(foundPerson.id, { ...foundPerson, number })\r\n          .then((updatedPerson) => {\r\n            console.log(`updated person props`,updatedPerson)\r\n            setPersons(\r\n              persons.map((person) => (person.name ? updatedPerson : person))\r\n            );\r\n            console.group(persons)\r\n          })\r\n          .catch((err) => {\r\n            console.log(err);\r\n            setErrorMessage('This is an error');\r\n          });\r\n        setPersons(persons.concat(nameObject));\r\n        console.log(nameObject, persons)\r\n        setErrorMessage(`Changed ${nameObject} number`);\r\n        setNewName('');\r\n        setNumber('');\r\n        setTimeout(() => {\r\n          setErrorMessage(null);\r\n        }, 3000);\r\n      }\r\n    } else {\r\n      personsService\r\n        .create(nameObject)\r\n        .then((newPerson) => {\r\n          setPersons(persons.concat(nameObject));\r\n          setErrorMessage(`Added ${nameObject.name}`);\r\n          setNewName('');\r\n          setNumber('');\r\n        })\r\n        .catch((error) => {\r\n          setErrorMessage(`${error.response.data.error}`);\r\n          console.log(error);\r\n        });\r\n      setTimeout(() => {\r\n        setErrorMessage(null);\r\n      }, 3000);\r\n    }\r\n  };\r\n\r\n  const handleDeletePerson = (name, id) => {\r\n    return () => {\r\n      if (window.confirm(`Delete ${name}?`)) {\r\n        personsService\r\n          .deletePerson(id)\r\n          .then(() => {\r\n            setPersons(persons.filter((n) => n.id !== id));\r\n            setErrorMessage(`Deleted ${name}`);\r\n            setNewName('');\r\n            setNumber('');\r\n          })\r\n          .catch((err) => {\r\n            setPersons(persons.filter((n) => n.name !== name));\r\n            setErrorMessage(`User ${name} has already been deleted`);\r\n          });\r\n        setTimeout(() => {\r\n          setErrorMessage(null);\r\n        }, 3000);\r\n      }\r\n    };\r\n  };\r\n\r\n  useEffect(() => {\r\n    personsService.getAll().then((names) => {\r\n      setPersons(names);\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification message={errorMessage} />\r\n      <Filter filtered={filtered} handleFilter={handleFilter} />\r\n      <h2>Add a new person!</h2>\r\n      <AddPerson\r\n        newName={newName}\r\n        addName={addName}\r\n        handleNameChange={handleNameChange}\r\n        handleNumberChange={handleNumberChange}\r\n        number={number}\r\n      />\r\n      <h2>Numbers</h2>\r\n      <Persons\r\n        persons={persons}\r\n        filtered={filtered}\r\n        handleDeletePerson={handleDeletePerson}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import reactDOM from 'react-dom'\r\n\r\nimport App from './App'\r\n\r\n\r\nreactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}